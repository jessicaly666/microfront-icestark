var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,c=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,s=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&c(e,n,t[n]);if(r)for(var n of r(t))a.call(t,n)&&c(e,n,t[n]);return e},l=(e,r)=>t(e,n(r)),i=(e,t)=>{var n={};for(var c in e)o.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&r)for(var c of r(e))t.indexOf(c)<0&&a.call(e,c)&&(n[c]=e[c]);return n};import{a as u,R as p,r as d,q as f,l as m,L as h,B as g,b as E,c as y,S as b,d as w,e as _,f as k,g as C,h as v,i as A,A as P,j as R,k as x,m as S,n as I,o as O,p as N,s as L,t as j,u as M}from"./vendor.js";var q="";const T={},F={default:u.create(T)};function $(e){if(e){if(F[e])return F;F[e]=u.create(T)}return F}const B=({appConfig:e})=>{if(e.request){const{request:t={}}=e;if("[object Array]"===Object.prototype.toString.call(t))t.forEach((e=>{const t=e.instanceName?e.instanceName:"default";if(t){const n=undefined;D(e,$(t)[t])}}));else{const e=undefined;D(t,$().default)}}};function D(e,t){const n=e,{interceptors:r={}}=n,o=i(n,["interceptors"]);Object.keys(o).forEach((e=>{t.defaults[e]=o[e]})),r.request&&t.interceptors.request.use(r.request.onConfig||function(e){return e},r.request.onError||function(e){return Promise.reject(e)}),r.response&&t.interceptors.response.use(r.response.onConfig||function(e){return e},r.response.onError||function(e){return Promise.reject(e)})}function H(e){B({appConfig:e})}const z=(e,t)=>`${e.toString()}\n\nThis is located at:${t}`,U={display:"flex",flexDirection:"column",alignItems:"center",margin:"100px 0",color:"#ed3131"},G=({componentStack:e,error:t})=>p.createElement("div",{style:U,title:z(t,e)},p.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"843",width:"60",height:"60"},p.createElement("path",{d:"M1024 512C1024 229.23 794.77 0 512 0S0 229.23 0 512s229.23 512 512 512c117.41 0 228.826-39.669 318.768-111.313 10.79-8.595 12.569-24.308 3.975-35.097-8.594-10.789-24.308-12.568-35.097-3.974C718.47 938.277 618.002 974.049 512 974.049 256.818 974.049 49.951 767.182 49.951 512S256.818 49.951 512 49.951 974.049 256.818 974.049 512c0 87.493-24.334 171.337-69.578 243.96-7.294 11.708-3.716 27.112 7.992 34.405 11.707 7.294 27.11 3.716 34.405-7.991C997.014 701.88 1024 608.898 1024 512z","p-id":"844",fill:"#cdcdcd"}),p.createElement("path",{d:"M337.17 499.512c34.485 0 62.44-27.955 62.44-62.439s-27.955-62.439-62.44-62.439c-34.483 0-62.438 27.955-62.438 62.44 0 34.483 27.955 62.438 62.439 62.438z m374.635 0c34.484 0 62.439-27.955 62.439-62.439s-27.955-62.439-62.44-62.439c-34.483 0-62.438 27.955-62.438 62.44 0 34.483 27.955 62.438 62.439 62.438zM352.788 704.785c43.377-34.702 100.364-55.425 171.7-55.425 71.336 0 128.322 20.723 171.7 55.425 26.513 21.21 42.695 42.786 50.444 58.284 6.168 12.337 1.168 27.34-11.17 33.508-12.337 6.169-27.34 1.168-33.508-11.17-0.918-1.834-3.462-6.024-7.788-11.793-7.564-10.084-17.239-20.269-29.183-29.824-34.671-27.737-80.71-44.478-140.495-44.478-59.786 0-105.824 16.74-140.496 44.478-11.944 9.555-21.619 19.74-29.182 29.824-4.327 5.769-6.87 9.959-7.788 11.794-6.169 12.337-21.171 17.338-33.509 11.17-12.337-6.17-17.338-21.172-11.169-33.509 7.75-15.498 23.931-37.074 50.444-58.284z","p-id":"845",fill:"#cdcdcd"})),p.createElement("h3",null,"Oops! Something went wrong."));class K extends d.exports.Component{constructor(e){super(e),this.state={error:null,info:{componentStack:""}}}componentDidCatch(e,t){const{onError:n}=this.props;if("function"==typeof n)try{n.call(this,e,t.componentStack)}catch(r){}this.setState({error:e,info:t})}render(){const{children:e,Fallback:t}=this.props,{error:n,info:r}=this.state;return null!==n&&"function"==typeof t?p.createElement(t,{componentStack:r&&r.componentStack,error:n}):e||null}}K.defaultProps={Fallback:G};var V=({appConfig:e,wrapperPageComponent:t,buildConfig:n,context:r,applyRuntimeAPI:o,getRuntimeValue:a,addProvider:c})=>{const{app:s={}}=e,{ErrorBoundaryFallback:l,onErrorBoundaryHandler:i,renderComponent:u,addProvider:p}=s;p&&c(p);const{parseSearchParams:d=!0}=s;d&&t(W(o)),t(Z()),t(Y(l,i)),a("enableRouter")};function W(e){const t=undefined;return t=>{const{pageConfig:n}=t,r=undefined;return r=>{const o=e("getSearchParams");return p.createElement(t,s({},Object.assign({},r,{searchParams:o,pageConfig:n})))}}}function Y(e,t){const n=undefined;return n=>{const{pageConfig:r={}}=n,o=undefined;return o=>r.errorBoundary?p.createElement(K,{Fallback:e,onError:t},p.createElement(n,s({},o))):p.createElement(n,s({},o))}}function Z(){const e=undefined;return e=>{const{pageConfig:t}=e,{title:n,scrollToTop:r}=t||{},o=undefined;return t=>{const[o,a]=d.exports.useState(window.__ICE_PAGE_PROPS__);return d.exports.useEffect((()=>{n&&(document.title=n),r&&window.scrollTo(0,0),window.__ICE_PAGE_PROPS__?window.__ICE_PAGE_PROPS__=null:e.getInitialProps&&(async()=>{const{href:t,origin:n,pathname:r,search:o}=window.location,c=undefined,s=undefined,l=undefined,i={pathname:r,path:t.replace(n,""),query:f.parse(o),ssrError:window.__ICE_SSR_ERROR__},u=await e.getInitialProps(i);a(u)})()}),[]),p.createElement(e,s({},Object.assign({},t,o)))}}}const J=undefined;var Q="_title_1y4mf_2",X=e=>p.createElement("div",{className:"icestark-child-app"},p.createElement("h3",{className:Q},"icestark React \u5fae\u5e94\u7528"),e.children);const ee=undefined,te=undefined,ne=undefined,re=undefined;var oe="_app_1m20l_1",ae="_logo_1m20l_5",ce="_header_1m20l_10",se="_link_1m20l_18",le="_App-logo-spin_1m20l_1";function ie(e){console.log("props",e);const{frameworkProps:{name:t}}=e,[n,r]=d.exports.useState("");return d.exports.useEffect((()=>(console.log("Home Page mounted"),m.store.on("language",(e=>{r(e)}),!0),()=>{console.log("Home Page unmounted")})),[]),p.createElement("div",{className:oe},p.createElement("p",null,"\u4f20\u9012props\u53c2\u6570\uff1a",t),p.createElement("p",null,"\u5f53\u524d\u8bed\u8a00\uff1a",n),p.createElement("br",null),p.createElement(h,{to:"/detail"},"\u5fae\u5e94\u7528\u8df3\u8f6c\u5185\u90e8\u8def\u7531"),p.createElement("br",null),p.createElement("br",null),p.createElement(g,{type:"primary",onClick:()=>{E.appHistory.push("/")}},"\u5fae\u5e94\u7528\u95f4\u8df3\u8f6c 1"),p.createElement("br",null),p.createElement("br",null),p.createElement(g,{type:"primary",onClick:()=>{E.appHistory.push("/waiter")}},"\u5fae\u5e94\u7528\u95f4\u8df3\u8f6c 2"))}const ue=async function(e){try{const t=e.instanceName?e.instanceName:"default",n=$()[t];if("function"!=typeof n)throw new Error(`unknown ${t} in request method`);const r=await n(e);return n.defaults.withFullResponse||e.withFullResponse?r:r.data}catch(t){throw console.error(t),t}};y.forEach(["delete","get","head","options"],(function e(t){ue[t]=function(e,n){return ue(y.merge(n||{},{method:t,url:e}))}})),y.forEach(["post","put","patch"],(function e(t){ue[t]=function(e,n,r){return ue(y.merge(r||{},{method:t,url:e,data:n}))}})),ue.CancelToken=u.CancelToken,ue.isCancel=u.isCancel;const pe=undefined;var de="_container_mdqyv_1";function fe(){d.exports.useEffect((()=>{e()}),[]);const e=async()=>{const e=await ue({url:"/test/sign"});console.log("data",e)};return p.createElement("div",{className:de},p.createElement("h2",null,"\u8be6\u60c5\u9875\u9762"),p.createElement(h,{to:"/"},"\u8fd4\u56de\u5fae\u5e94\u7528\u9996\u9875"))}const me=undefined;var he="_container_mdqyv_1";function ge(){return p.createElement("div",{className:he},p.createElement("h2",null,"\u5217\u8868\u9875\u9762"),p.createElement(h,{to:"/"},"\u8fd4\u56de\u5fae\u5e94\u7528\u9996\u9875"))}var Ee=()=>p.createElement("div",null,"404 not found");const ye=[{path:"/",component:X,children:[{path:"/",exact:!0,component:ie},{path:"/detail",component:fe},{path:"/list",component:ge},{component:E.isInIcestark()?()=>E.renderNotFound():Ee}]}];function be(e,t){return(t||[]).reduce(((e,t)=>{const n=t(e);return e.pageConfig&&(n.pageConfig=e.pageConfig),e.getInitialProps&&(n.getInitialProps=e.getInitialProps),n}),e)}function we(e,t){t&&["pageConfig","getInitialProps"].forEach((n=>{Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))}function _e(e,t,n,r){const{__LAZY__:o,dynamicImport:a,__LOADABLE__:c}=e||{};return c?v(a,{resolveComponent:e=>{const r=e.default;return we(r,n),be(r,t)},fallback:r}):o?d.exports.lazy((()=>a().then((e=>{if(t&&t.length){const r=e.default;return we(r,n),l(s({},e),{default:be(r,t)})}return e})))):(we(e,n),be(e,t))}function ke(e,t){return e.map((e=>{const n=e,{children:r,component:o,routeWrappers:a,wrappers:c}=n,l=i(n,["children","component","routeWrappers","wrappers"]);let u=r?[]:a;c&&c.length&&(u=u.concat(c));const p=s({},l);return o&&(p.component=_e(o,u,e,t)),r&&(p.children=ke(r,t)),p}))}function Ce(e){const t=e,{type:n,children:r}=t,o=i(t,["type","children"]);let a=r;if(!a&&e.routes){const t=ke(e.routes,e.fallback);a=p.createElement(ve,{routes:t,fallback:e.fallback})}return"static"===n?p.createElement(b,s({},o),a):p.createElement(w,s({},o),a)}function ve({routes:e,fallback:t}){return p.createElement(_,null,e.map(((e,n)=>{const{children:r}=e;if(r){const r=e,{component:o,children:a}=r,c=i(r,["component","children"]),u=p.createElement(ve,{routes:a,fallback:t}),d=e=>o?p.createElement(o,s({},e),u):u;return p.createElement(C,l(s({key:n},c),{render:d}))}if(e.redirect){const t=e,{redirect:r}=t,o=i(t,["redirect"]);return p.createElement(k,s({key:n,from:e.path,to:r},o))}{const r=e,{component:o}=r,a=i(r,["component"]);if(o){const e=window.__ICE_SSR_ENABLED__?e=>p.createElement(o,s({},e)):e=>p.createElement(d.exports.Suspense,{fallback:t||p.createElement("div",null,"loading")},p.createElement(o,s({},e)));return p.createElement(C,l(s({key:n},a),{render:e}))}return console.error("[Router] component is required when config routes"),null}})))}function Ae(...e){if(0===e.length)return"";const t=[],n=e.filter((e=>""!==e));return n.forEach(((e,r)=>{if("string"!=typeof e)throw new Error(`Path must be a string. Received ${e}`);let o=e;r>0&&(o=o.replace(/^[/]+/,"")),o=r<n.length-1?o.replace(/[/]+$/,""):o.replace(/[/]+$/,"/"),t.push(o)})),t.join("/")}function Pe(e,t){return e.map((e=>{const n={};if(e.path){const r=Ae(t||"",e.path);n.path="/"===r?"/":r.replace(/\/$/,"")}if(e.children)n.children=Pe(e.children,n.path||e.path);else if(e.component){const t=e.component;t.pageConfig=Object.assign({},t.pageConfig,{componentName:t.name})}return s(s({},e),n)}))}const Re=({setRenderApp:e,appConfig:t,modifyRoutes:n,modifyRoutesComponent:r,buildConfig:o,context:a,applyRuntimeAPI:c})=>{const{router:u={}}=t;n((()=>Pe(u.routes||ye,""))),r((()=>ve)),u.modifyRoutes&&n(u.modifyRoutes);const d=o&&o.router&&o.router.lazy,f=undefined;e(((e,t,n={})=>()=>{let r=s(l(s({},u),{lazy:d}),n);r.history||(r.history=c("createHistory",{type:u.type,basename:u.basename}));const o=r,{fallback:a}=o,f=i(o,["fallback"]);return p.createElement(Ce,s({},f),t?p.createElement(t,{routes:ke(e,a),fallback:a}):null)}))},xe=d.exports.createContext(null),Se=({value:e={},children:t})=>{const[n,r]=d.exports.useState(e),o=(e={})=>{r(s(s({},n),e))};return p.createElement(xe.Provider,{value:[n,o]},t)},Ie=()=>{const e=undefined;return d.exports.useContext(xe)};function Oe(e){const t=undefined;return t=>{const[n,r]=Ie(),o=e;return p.createElement(o,l(s({},t),{auth:n,setAuth:r}))}}const Ne=e=>t=>{const{pageConfig:n={}}=t,r=undefined;return Oe((r=>{const o=r,{auth:a,setAuth:c}=o,l=i(o,["auth","setAuth"]),u=n.auth;if(u&&!Array.isArray(u))throw new Error("pageConfig.auth must be an array");const d=undefined;return!Array.isArray(u)||!u.length||Object.keys(a).filter((e=>!!u.includes(e)&&a[e])).length?p.createElement(t,s({},l)):e.NoAuthFallback?"function"==typeof e.NoAuthFallback?p.createElement(e.NoAuthFallback,null):e.NoAuthFallback:null}))};var Le=({context:e,appConfig:t,addProvider:n,wrapperPageComponent:r})=>{const o=undefined,a=(e&&e.initialData?e.initialData:{}).auth||{},c=t.auth||{},s=undefined;n((({children:e})=>p.createElement(Se,{value:a},e))),r(Ne(c))},je=!1;function Me(e){let t=[];return e.forEach((e=>{"/"===e.path&&e.children?t=[...t,...e.children]:t.push(e)})),t}const qe=({appConfig:e,addDOMRender:t,buildConfig:n,setRenderApp:r,setRenderRouter:o,wrapperRouterRender:a,modifyRoutes:c,applyRuntimeAPI:i,createHistory:u,wrapperPageComponent:f,wrapperRouteComponent:m})=>{const{icestark:h,router:g}=e,{type:y="child",registerAppEnter:b,registerAppLeave:w,getApps:_,$$props:k}=h||{},{type:C,basename:v,modifyRoutes:x,fallback:S}=g,I=f||m,O=u||(e=>i("createHistory",e)),N=r||o;if(x&&c(x),"child"===y){const{icestarkUMD:e,icestarkType:r}=n,o=r||(e?"umd":"normal"),c=E.isInIcestark()?E.getBasename():v,i=O({type:C,basename:c});t((({App:e,appMountNode:t})=>new Promise((n=>{if(E.isInIcestark())if("normal"===o)E.registerAppEnter((t=>{const r=t&&t.container||E.getMountNode();b?b(r,e,n):A.exports.render(p.createElement(e,null),r,(()=>{n(!0)}))})),E.registerAppLeave((e=>{const t=e&&e.container||E.getMountNode();w?w(t):A.exports.unmountComponentAtNode(t)}));else{let{container:t}=null!=k?k:{};t||(t=E.getMountNode()),A.exports.render(p.createElement(e,null),t,(()=>{n(!0)}))}else A.exports.render(p.createElement(e,null),t,(()=>{n(!0)}))}))));const u=undefined;I((e=>t=>{const{customProps:n={}}=null!=k?k:{},r=l(s({},t),{frameworkProps:n});return p.createElement(e,s({},r))}));const d={type:C,basename:c,history:i,fallback:S};a?a((e=>(t,n)=>e(t,n,d))):N((e=>()=>p.createElement(Ce,l(s({},d),{routes:e}))))}else if("framework"===y&&_){const{appRouter:e,Layout:t,AppRoute:n,removeRoutesLayout:r}=h||{};r&&c(Me);const o=({routes:e})=>{const[t]=d.exports.useState(O({type:C,basename:v})),n={type:C,routes:e,basename:v,history:t,fallback:S};return p.createElement(Ce,s({},n))},a=undefined;N((r=>()=>{const[a,c]=d.exports.useState(window.location.pathname),[i,u]=d.exports.useState({}),[f,m]=d.exports.useState({}),[h,g]=d.exports.useState({}),[E,y]=d.exports.useState(null),b=t||(e=>p.createElement(p.Fragment,null,e.children)),w=n||R;function k(e,t,n,r){u({pathname:e,query:t,hash:n,routeType:r}),c(e)}function C(e){g(e)}function v(e){m(e)}d.exports.useEffect((()=>{(async()=>{const e=await _();y(e)})()}),[]);const A={pathname:a,routeInfo:i,appEnter:f,appLeave:h,updateApps:y},x=d.exports.useMemo((()=>d.exports.memo((()=>p.createElement(o,{routes:r})))),[]);return p.createElement(b,s({},A),E&&p.createElement(P,l(s({},e||{}),{onRouteChange:k,onAppEnter:v,onAppLeave:C}),E.map(((e,t)=>p.createElement(w,s({key:t},e)))),r&&r.length&&p.createElement(w,{path:"/",render:()=>p.createElement(x,null)})))}))}"framework"!==y||_||console.warn("\n      [plugin-icestark]: appConfig.icestark.getApps should be not empty if this is an framework app; If not\uff0cplease make sure appConfgi.icestark.type exist.\n      see https://ice.work/docs/guide/advanced/icestark/\n    ")};function Te(e){e.loadModule(V),e.loadModule(Re),e.loadModule(Le),e.loadModule(qe)}const Fe={mpa:!1,icestarkType:"es"},$e={enableRouter:!0},Be=x({loadRuntimeModules:Te,createElement:d.exports.createElement,runtimeAPI:{createHistory:S,getSearchParams:I},runtimeValue:$e});function De(e){H(e),O&&O(e),N({appConfig:e,buildConfig:Fe,ErrorBoundary:K,appLifecycle:{createBaseApp:Be,initAppLifeCycles:L,emitLifeCycles:j}})}var He={local:{baseURL:"https://test-e-contract-backend.visualchina.com"},stage:{baseURL:"https://stage-e-contract-backend.visualchina.com"},prod:{baseURL:"https://vcg-contract-backend.visualchina.com"}};const ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ue=s(s({},{}),He[ze.__app_mode__||"local"]||{});ze.__app_mode__;const Ge={router:{type:"browser"},request:{baseURL:Ue.baseURL}};E.isInIcestark()||De(Ge),"undefined"!=typeof window&&window.ICESTARK&&window.ICESTARK.loadMode&&"umd"!==window.ICESTARK.loadMode&&console.warn("[icestark] unable to get lifecycle from umd module without specify the configration of umd");const Ke=async e=>{(Ge.icestark=Ge.icestark||{}).$$props=e,De(Ge)},Ve=async({container:e,customProps:t})=>{var n;(null==(n=null==Ge?void 0:Ge.icestark)?void 0:n.regsiterAppLeave)?Ge.icestark.regsiterAppLeave(e,t):M.unmountComponentAtNode(e)},We=async()=>{console.log("bootstrap")};export{We as bootstrap,Ke as mount,Ve as unmount};
